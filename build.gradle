plugins {
    id 'java'
    id 'application'

    id 'com.jfrog.bintray' version '1.8.5'
    id 'maven-publish'
}

startScripts {
    applicationName = 'basic_117'
    group = 'de.iotoi'
    sourceCompatibility = JavaVersion.VERSION_11
    description = 'Hello Publish jcenter!'
}
version = project.findProperty("version")

apply from: '../jcenter_api_key.properties'

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.2'
}

application {
    mainClass = "de.iotoi.App"
}

test {
    useJUnitPlatform()
}

publishing{
    publications{
        DemoJcenter(MavenPublication){
            groupId startScripts.group
            artifactId archivesBaseName
            version project.version
            artifact distZip
        }
    }
}

bintray{
    user = project.findProperty("bintrayUser")
    key = project.findProperty("bintrayApiKey")
    publications = ['DemoJcenter']
    publish = true // !!!
    pkg{
        repo = 'gradle_java_jcenter'
        name = startScripts.applicationName
        desc = startScripts.description
        licenses = ['Apache-2.0']
        vcsUrl = 'https://github.com/cnruby/gradle_java'
        labels = ['java, demo, jcenter, library, gradle, bintray, publish']
        version {
            name = project.version
            released = new Date()
        }
    }
}

